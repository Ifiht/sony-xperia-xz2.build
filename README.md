# sony-xperia-xz2.build
Custom resources for building AOSP 8.0.0 for the Xperia XZ2 Compact (h8314)

References
----------
* https://en.wikipedia.org/wiki/Sony_Xperia
* https://developer.sony.com/develop/open-devices/guides/aosp-build-instructions/build-aosp-oreo-8-0-kernel-4-4/#tutorial-step-3

Procedure
---------
1. Follow Sony Dev Guide up to 4.3
2. `cd ~/android/devices/sony`
   1. `git clone https://github.com/sonyxperiadev/device-sony-tama.git tama`
   2. `git clone https://github.com/sonyxperiadev/device-sony-apollo.git apollo`
3. _ninja: error: 'kernel/sony/msm/arch/arm64/configs/aosp_tama_apollo_defconfig', needed by '/home/anna/android_8-0-0/out/target/product/apollo/obj/KERNEL_OBJ/.config', missing and no known rule to make it_
4. Pull config from current device:
   * ``cat /boot/config-`uname -r` ``   OR
   * `adb pull /proc/config.gz`  for current Kernel configuration options
5. Android 8.0.0, Linux kernel 4.9.65-perf+
not in apollo:
-CONFIG_TASK_DELAY_ACCT=y
-CONFIG_MEMCG_SWAP=y
-CONFIG_SCHED_HMP=y
-CONFIG_SCHED_HMP_CSTATE_AWARE=y
-CONFIG_RELAY=y
-# CONFIG_RD_BZIP2 is not set
-# CONFIG_RD_LZMA is not set
-# CONFIG_AIO is not set
-CONFIG_JUMP_LABEL=y
-# CONFIG_IOSCHED_TEST is not set
-CONFIG_ARCH_MSM8998=y
-CONFIG_ARCH_MSMHAMSTER=y
-CONFIG_ARCH_SONY_YOSHINO=y
-CONFIG_MACH_SONY_LILAC=y
-CONFIG_QCOM_TLB_EL2_HANDLER=y
-CONFIG_HZ_1000=y
-CONFIG_ARM64_REG_REBALANCE_ON_CTX_SW=y
-CONFIG_CMA_DEBUGFS=y
-CONFIG_SWAP_CONSIDER_CMA_FREE=y
-CONFIG_FORCE_ALLOC_FROM_DMA_ZONE=y
-# CONFIG_EFI is not set
-CONFIG_BUILD_ARM64_APPENDED_DTB_IMAGE_NAMES="msm8998-v2-yoshino-lilac_generic  msm8998-v2.1-yoshino-lilac_generic"
-# CONFIG_INET_LRO is not set
-CONFIG_NETFILTER_XT_MATCH_QUOTA2_LOG=y
-CONFIG_CLS_U32_MARK=y
-CONFIG_NET_CLS_FLOW=y
-CONFIG_SOCKEV_NLMCAST=y
-# CONFIG_PNP_DEBUG_MESSAGES is not set
-CONFIG_ZRAM_LZ4_COMPRESS=y
-CONFIG_LDO_VIBRATOR=y
-CONFIG_HDCP_QSEECOM=y
-CONFIG_NFC_PN547=y
-CONFIG_SENSORS_TCS3490=y
-CONFIG_TOF_SENSOR=y
-CONFIG_BLK_DEV_MD=y
-CONFIG_MD_LINEAR=y
-CONFIG_DM_DEFAULT_KEY=y
-CONFIG_DM_ANDROID_VERITY=y
-# CONFIG_NET_VENDOR_3COM is not set
-# CONFIG_NET_VENDOR_ADAPTEC is not set
-# CONFIG_NET_VENDOR_AGERE is not set
-# CONFIG_NET_VENDOR_ALTEON is not set
-# CONFIG_NET_VENDOR_AMD is not set
-# CONFIG_NET_VENDOR_ARC is not set
-# CONFIG_NET_VENDOR_ATHEROS is not set
-# CONFIG_NET_CADENCE is not set
-# CONFIG_NET_VENDOR_BROADCOM is not set
-# CONFIG_NET_VENDOR_BROCADE is not set
-# CONFIG_NET_VENDOR_CAVIUM is not set
-# CONFIG_NET_VENDOR_CHELSIO is not set
-# CONFIG_NET_VENDOR_CISCO is not set
-# CONFIG_NET_VENDOR_DEC is not set
-# CONFIG_NET_VENDOR_DLINK is not set
-# CONFIG_NET_VENDOR_EMULEX is not set
-# CONFIG_NET_VENDOR_EZCHIP is not set
-# CONFIG_NET_VENDOR_EXAR is not set
-# CONFIG_NET_VENDOR_HISILICON is not set
-# CONFIG_NET_VENDOR_HP is not set
-# CONFIG_NET_VENDOR_INTEL is not set
-# CONFIG_NET_VENDOR_MARVELL is not set
-# CONFIG_NET_VENDOR_MELLANOX is not set
-# CONFIG_NET_VENDOR_MICREL is not set
-# CONFIG_NET_VENDOR_MICROCHIP is not set
-CONFIG_RNDIS_IPA=y
-# CONFIG_NET_VENDOR_MYRI is not set
-# CONFIG_NET_VENDOR_NATSEMI is not set
-# CONFIG_NET_VENDOR_NVIDIA is not set
-# CONFIG_NET_VENDOR_OKI is not set
-# CONFIG_NET_PACKET_ENGINE is not set
-# CONFIG_NET_VENDOR_QLOGIC is not set
-# CONFIG_NET_VENDOR_QUALCOMM is not set
-# CONFIG_NET_VENDOR_REALTEK is not set
-# CONFIG_NET_VENDOR_RENESAS is not set
-# CONFIG_NET_VENDOR_RDC is not set
-# CONFIG_NET_VENDOR_ROCKER is not set
-# CONFIG_NET_VENDOR_SAMSUNG is not set
-# CONFIG_NET_VENDOR_SEEQ is not set
-# CONFIG_NET_VENDOR_SILAN is not set
-# CONFIG_NET_VENDOR_SIS is not set
-# CONFIG_NET_VENDOR_SMSC is not set
-# CONFIG_NET_VENDOR_STMICRO is not set
-# CONFIG_NET_VENDOR_SUN is not set
-# CONFIG_NET_VENDOR_SYNOPSYS is not set
-# CONFIG_NET_VENDOR_TEHUTI is not set
-# CONFIG_NET_VENDOR_TI is not set
-# CONFIG_NET_VENDOR_VIA is not set
-# CONFIG_NET_VENDOR_WIZNET is not set
-CONFIG_USB_USBNET=y
-# CONFIG_USB_NET_AX8817X is not set
-# CONFIG_USB_NET_AX88179_178A is not set
-# CONFIG_USB_NET_NET1080 is not set
-# CONFIG_USB_BELKIN is not set
-# CONFIG_USB_NET_ZAURUS is not set
-CONFIG_INPUT_KEYRESET=y
-# CONFIG_KEYBOARD_ATKBD is not set
-# CONFIG_TOUCHSCREEN_SYNAPTICS_DSX_v21 is not set
-# CONFIG_TOUCHSCREEN_SYNAPTICS_DSX_v26 is not set
-CONFIG_TOUCHSCREEN_CLEARPAD_I2C=y
-CONFIG_INPUT_BU520X1NVX=y
-CONFIG_FPC1145_PLATFORM=y
-# CONFIG_SERIO is not set
-CONFIG_SERIAL_MSM_HS=y
-CONFIG_SERIAL_MSM_SMD=y
-CONFIG_I2C_MSM_V2=y
-CONFIG_SOUNDWIRE=y
-CONFIG_SPI=y
-CONFIG_SPI_QUP=y
-CONFIG_SPI_SPIDEV=y
-CONFIG_PINCTRL_MSM8998=y
-CONFIG_PINCTRL_SDM660=y
-CONFIG_GPIO_QPNP_PIN=y
-CONFIG_MSM_BCL_CTL=y
-CONFIG_BATTERY_BCL=y
-CONFIG_QPNP_SMB2=y
-CONFIG_QPNP_SMBFG_NEWGEN_EXTENSION=y
-CONFIG_SMB138X_CHARGER=y
-CONFIG_MSM_PM=y
-CONFIG_APSS_CORE_EA=y
-CONFIG_MSM_APM=y
-CONFIG_SENSORS_QPNP_ADC_VOLTAGE=y
-CONFIG_CPU_THERMAL=y
-CONFIG_LIMITS_MONITOR=y
-CONFIG_LIMITS_LITE_HW=y
-CONFIG_THERMAL_MONITOR=y
-CONFIG_THERMAL_TSENS8974=y
-CONFIG_THERMAL_QPNP=y
-CONFIG_THERMAL_QPNP_ADC_TM=y
-CONFIG_QCOM_THERMAL_LIMITS_DCVS=y
-CONFIG_MFD_I2C_PMIC=y
-CONFIG_WCD9335_CODEC=y
-CONFIG_WCD934X_CODEC=y
-CONFIG_REGULATOR_RPM_SMD=y
-CONFIG_REGULATOR_QPNP_LABIBB=y
-CONFIG_REGULATOR_QPNP_LCDB=y
-CONFIG_REGULATOR_SPM=y
-CONFIG_REGULATOR_CPR3_HMSS=y
-CONFIG_REGULATOR_CPR3_MMSS=y
-CONFIG_REGULATOR_CPRH_KBSS=y
-CONFIG_REGULATOR_MEM_ACC=y
-CONFIG_REGULATOR_PROXY_CONSUMER=y
-CONFIG_MSM_CAMERA=y
-CONFIG_MSMB_CAMERA=y
-CONFIG_MSM_CAMERA_SENSOR=y
-CONFIG_MSM_CPP=y
-CONFIG_MSM_CCI=y
-CONFIG_MSM_CSI20_HEADER=y
-CONFIG_MSM_CSI22_HEADER=y
-CONFIG_MSM_CSI30_HEADER=y
-CONFIG_MSM_CSI31_HEADER=y
-CONFIG_MSM_CSIPHY=y
-CONFIG_MSM_CSID=y
-CONFIG_MSM_EEPROM=y
-CONFIG_MSM_ISPIF=y
-CONFIG_MSMB_JPEG=y
-CONFIG_MSM_JPEGDMA=y
-CONFIG_SONY_CAM_V4L2=y
-CONFIG_MSM_VIDC_VMEM=y
-CONFIG_FB_MSM=y
-CONFIG_FB_MSM_MDSS=y
-CONFIG_FB_MSM_MDSS_WRITEBACK=y
-CONFIG_FB_MSM_MDSS_HDMI_PANEL=y
-CONFIG_FB_MSM_MDSS_DP_PANEL=y
-CONFIG_FB_MSM_MDSS_SPECIFIC_PANEL=y
-CONFIG_SOMC_PANEL_INCELL=y
-# CONFIG_SND_PCI is not set
-# CONFIG_SND_SPI is not set
-CONFIG_SND_SOC_MSM8998=y
-CONFIG_SND_SOC_WCD_CPE_SOMC_EXT=y
-CONFIG_HIDRAW=y
-CONFIG_HID_LOGITECH=y
-CONFIG_HID_PANTHERLORD=y
-CONFIG_HID_SONY=y
-CONFIG_USB_HIDDEV=y
-CONFIG_USB_EHCI_HCD=y
-CONFIG_USB_DWC3_MSM_ID_POLL=y
-CONFIG_USB_OTG_WAKELOCK=y
-CONFIG_MSM_USB_PHY_SOMC_EXT=y
-CONFIG_DUAL_ROLE_USB_INTF=y
-CONFIG_USB_CONFIGFS_NCM=y
-CONFIG_USB_CONFIGFS_F_CDEV=y
-CONFIG_USB_CONFIGFS_F_CCID=y
-CONFIG_LEDS_SYSCON=y
-CONFIG_QCOM_SPS_DMA=y
-CONFIG_ANDROID_TIMED_GPIO=y
-CONFIG_ANDROID_LOW_MEMORY_KILLER_CONSIDER_SWAP=y
-CONFIG_QCA_CLD_WLAN=y
-CONFIG_QCACLD_WLAN_LFR3=y
-CONFIG_WLAN_FEATURE_11W=y
-CONFIG_QCOM_TDLS=y
-CONFIG_WLAN_FASTPATH=y
-CONFIG_WLAN_NAPI=y
-CONFIG_MCC_TO_SCC_SWITCH=y
-CONFIG_QCACLD_WLAN_LFR2=y
-CONFIG_WLAN_FEATURE_DISA=y
-CONFIG_QPNP_REVID=y
-CONFIG_QPNP_COINCELL=y
-CONFIG_SPS=y
-CONFIG_SPS_SUPPORT_NDP_BAM=y
-CONFIG_IPA=y
-CONFIG_RMNET_IPA=y
-CONFIG_USB_BAM=y
-CONFIG_MSM_MDSS_PLL=y
-CONFIG_MSM_TIMER_LEAP=y
-CONFIG_MSM_SMD=y
-CONFIG_MSM_GLINK_SMD_XPRT=y
-CONFIG_MSM_SMP2P_TEST=y
-CONFIG_MSM_RPM_SMD=y
-CONFIG_QCOM_BUS_SCALING=y
-CONFIG_MSM_SERVICE_LOCATOR=y
-CONFIG_QCOM_DCC=y
-CONFIG_MSM_IPC_ROUTER_SMD_XPRT=y
-CONFIG_MSM_SYSMON_GLINK_COMM=y
-CONFIG_MSM_IPC_ROUTER_GLINK_XPRT=y
-CONFIG_MSM_SPM=y
-CONFIG_QCOM_SCM=y
-CONFIG_QCOM_WATCHDOG_V2=y
-CONFIG_QCOM_IRQ_HELPER=y
-CONFIG_QCOM_MEMORY_DUMP_V2=y
-CONFIG_ICNSS=y
-CONFIG_MSM_RUN_QUEUE_STATS=y
-CONFIG_MSM_BOOT_STATS=y
-CONFIG_MSM_ADSP_LOADER=y
-CONFIG_MSM_PERFORMANCE=y
-CONFIG_TRACER_PKT=y
-CONFIG_MSM_MPM_OF=y
-CONFIG_MSM_EVENT_TIMER=y
-CONFIG_MSM_AVTIMER=y
-CONFIG_QCOM_REMOTEQDSS=y
-CONFIG_MSM_SERVICE_NOTIFIER=y
-CONFIG_MSM_RPM_RBCPR_STATS_V2_LOG=y
-CONFIG_MSM_RPM_STATS_LOG=y
-CONFIG_QCOM_SMCINVOKE=y
-CONFIG_QCOM_EARLY_RANDOM=y
-CONFIG_MEM_SHARE_QMI_SERVICE=y
-CONFIG_SPDM_SCM=y
-CONFIG_DEVFREQ_SPDM=y
-CONFIG_EXTCON_SOMC_EXTENSION=y
-CONFIG_QCOM_TADC=y
-CONFIG_CPU_QUIET=y
-CONFIG_CPU_QUIET_DEFAULT_GOV_RQBALANCE=y
-CONFIG_CPU_QUIET_MSM=y
-# CONFIG_PRINT_QUOTA_WARNING is not set
-CONFIG_PSTORE_PMSG=y
-# CONFIG_NETWORK_FILESYSTEMS is not set
-# CONFIG_SCHED_DEBUG is not set
-CONFIG_TIMER_STATS=y
-# CONFIG_DEBUG_BUGVERBOSE is not set
-# CONFIG_FTRACE is not set
-CONFIG_SECURITY_SELINUX_CHECKREQPROT_VALUE=1
-CONFIG_CRYPTO_GCM=y
-CONFIG_CRYPTO_DEV_QCOM_MSM_QCE=y
-CONFIG_CRYPTO_DEV_OTA_CRYPTO=y
